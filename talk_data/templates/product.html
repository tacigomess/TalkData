{% extends 'base.html' %}
{% block styles %}
<link rel="stylesheet" href="static/css/product.css">
{% endblock %}
{% block content %}
<h2 class="text-center">How it works</h2>
<div class="cards">
    <div class="card">
        <i class="fa-solid fa-cloud-arrow-up large-icon"></i>
        <h4>Upload a spreadsheet</h4>
        <form action="/upload" method="post" enctype="multipart/form-data">
            <div class="form-group">
                <input type="file" class="form-control" id="csvFile" name="csvFile" accept=".csv">
            </div>
            <button type="submit" class="btn btn-primary">Upload</button>
        </form>
    </div>

    <div class="card">
        <i class="fa-solid fa-comment large-icon"></i>
        <h4>Talk to your data</h4>
        <form action="/search" method="post">
            <div class="form-group">
                <input type="text" class="form-control" id="searchInput" name="query" placeholder="Try 'show sales by region'">
                <input type="hidden" id="uploadedFilePath" name="uploadedFilePath" value="{{ uploadedFilePath }}">
            </div>
            <button type="submit" class="btn btn-primary">Enter</button>
        </form>
    </div>

    <div class="card">
        <i class="fa-solid fa-chart-line large-icon"></i>
        <h4>Visualize your chart</h4>
        {% if img is none %}
        <p>Make and interpret charts in seconds</p>
        {% else %}
        <!-- Element for the chart generated by the query -->
        <img src="static/images/{{ img }}" alt="Image returned" style="width: 100%;">
        <a href="{{ url_for('download_file', filename=img) }}" class="btn btn-primary">Download Chart</a>
        {% endif %}
    </div>
</div>

<div id="ideas">
    <form action="{{ url_for('search_ideas') }}" method="get">
        <input type="hidden" id="uploadedFilePath" name="uploadedFilePath" value="{{ uploadedFilePath }}">
        <button type="submit" class="btn btn-primary">Generate Ideas</button>
    </form>
    {% if frases is not none %}
    <ul>
        {% for frase in frases %}
        <li>{{ frase }}</li>
        {% endfor %}
    </ul>
    {% endif %}
</div>

<div>
    {% if texto is none %}
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    {% else %}
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    {{ texto }}
    {% endif %}
</div>
{% endblock %}
